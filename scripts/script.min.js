jQuery(document).ready(function(t){function e(){t(".basket-item:odd").addClass("basket-item--bg"),t(".basket-item:even").removeClass("basket-item--bg")}function s(){function e(e,s,a){e.click(function(e){var n=t(this).closest(".basket-item__counter").find(".basket-item__amount"),o=n.val();e.preventDefault(),o>a&&(o=+o+1*s),0==o?t(this).closest(".basket-item__counter").find(".btn--less").addClass("btn--unactive"):t(this).closest(".basket-item__counter").find(".btn--less").removeClass("btn--unactive"),n.val(o),i()})}e(t(".btn--more"),1,-1),e(t(".btn--less"),-1,0)}function a(t){return t<1e4?t:String(t).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")}function i(){var e=0,s=t(".basket-item");t(s).each(function(){var s=t(this).find(".basket-item__price"),i=s.text();i=a(i),s.text(i);var n=t(this).find(".basket-item__price").text().replace(/\D/g,""),o=t(this).find(".basket-item__amount").val(),c=n*o;e+=c,c<=0?t(this).find(".basket-item__cost").text("-"):t(this).find(".basket-item__cost").text(a(c))}),n(e)}function n(e){t(".basket-total__cost--no-discount").text(a(e)+" p");var s;s=e>=15e4?.15:e>=1e5?.1:e>=5e4?.05:0,t(".discount").text(100*s+"%");var i=e-e*s;t(".basket-total__cost--discount").text(a(i)+" p"),s?(t(".basket-total__text a").show(),t(".basket-total__line:eq(1)").show()):(t(".basket-total__text a").hide(),t(".basket-total__line:eq(1)").hide())}e(),s(),t(".basket-item__amount").change(function(t){t.preventDefault(),i()}),i(),t(".delete").click(function(s){s.preventDefault(),t(this).closest(".basket-item").remove(),e(),i()}),t(".delete-all").click(function(e){e.preventDefault(),t(".basket-item").remove(),i()})});